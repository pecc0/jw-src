#summary Как да разделим сферата на триъгълници

= Introduction =

 * Рекурсивно разделяне на триъгълници
 * Индексиране на триъгълниците
 * Индексиране на върховете

= Details =
Започваме от фигура [http://en.wikipedia.org/wiki/Octahedron октаедър], обърнат така че 4 от 6те му точки да са на екватора, другите 2 - на полюсите. 

Номерираме 4те триъгълника в северното полукълбо с индекси 0-3 (двоично: 000, 001, 010, 011), а в южното - с индекси 4-7 (000, 001, 010, 011). 

За всеки триъгълник, записваме ИД-тата на съседните - в масив с индекси 0-2. 

Рекурсивно разделяме вс. от триъгълниците на 4 по-малки. - вж. http://www.gamedev.net/reference/articles/article2074.asp

ИД-тата на новите триъгълници получаваме от ИД-то на изходния, като добавим още 2 бита вляво от ИД-то. Напр. ако изходния е 111, като го разделим, ще получим 00111, 01111, 10111 и 11111. Ест. всички ИД-та са 32бита. Т.е. 1н триъгълник се идентифицира от 2 числа - ИД и на коя стъпка на рекурсията е получен.

Номерираме страните на трийгълниците с индекса в масива на съседните триъгълници за вс. тр. (0-2). Номерираме за всеки триъгълник, всеки от върховете на триъгълника с индекса на страната която е преди него като се върви по часовниковата стрекла (0-2).

Глобално номерираме върховете по следния начин: върха получава ИДто този от 6те триъгълника в които участва, за който е с номер 0 във вътрешния списък, и които триъгълник е обърнат нагоре.
Да е обърнат нагоре значи единия връх да е по-нависоко от другите 2. Можем с О(конст) да определим дали е обърнат нагоре - само тръгваме по битовете на ИД-то му - виждаме какъв е най-първия, и при всяко срещане на 11, значи че трябва да обърнем посоката. 
За да е възможно да номерираме върховете на началния тетраедър, трябва само да внимаваме върховете на полюсите да не са с номер 0 във вътрешните списъци на 2 триъгълника. Това е възможно.
При рекурсивно получените триъгълници, триъгълниците в които върха е с номер 0 са един с/у друг => винаги единия е обърнат нагоре, другия надолу.

http://student.ulb.ac.be/~claugero/sphere/index.html